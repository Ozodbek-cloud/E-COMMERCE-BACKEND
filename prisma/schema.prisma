generator client {
  provider = "prisma-client-js"
}

enum Roles {
  User
  Customer
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Listing_Type {
  ForSale
  ForRent
}

model User {
  id           String         @id @default(uuid())
  firstName    String
  lastName     String
  email        String
  role         Roles
  password     String
  avatar       String?        @default("default-avatar.png")
  createdAt    DateTime       @default(now())
  Likes        Likes[]
  Contact      Contact[]
  Accomadation Accomadation[]
  Rating       Rating[]
}

model Likes {
  id            Int          @id @default(autoincrement())
  like          Boolean
  userId        String
  accomadtionId String
  user          User         @relation(fields: [userId], references: [id])
  accomadation  Accomadation @relation(fields: [accomadtionId], references: [id])
}

model Contact {
  id            String       @id @default(uuid())
  date          DateTime
  time          String
  phone         String
  email         String
  message       String
  userId        String
  accomadtionId String
  user          User         @relation(fields: [userId], references: [id])
  accomadation  Accomadation @relation(fields: [accomadtionId], references: [id])
}

model Accomadation {
  id           String       @id @default(uuid())
  house_img    Json?
  featured     Boolean
  listing_type Listing_Type
  title        String
  location     String
  features     Json
  discount     Float
  total_price  Float
  userId       String
  User         User         @relation(fields: [userId], references: [id])
  Likes        Likes[]
  Contact      Contact[]
  Rating       Rating[]
  Category     Category   @relation(fields: [categoryId], references: [id])
  categoryId   Int
}

model Rating {
  id            Int          @id @default(autoincrement())
  clean         Float
  location      Float
  communicate   Float
  userId        String
  accomadtionId String
  user          User         @relation(fields: [userId], references: [id])
  accomadation  Accomadation @relation(fields: [accomadtionId], references: [id])
}

model Category {
  id       Int    @id @default(autoincrement())
  name     String
  img      String
  icon_img String

  Accomadation Accomadation[]
}
